[gd_scene load_steps=29 format=4 uid="uid://giyscbdkyi1q"]

[ext_resource type="Script" uid="uid://bf4pxjrr8au5t" path="res://scenes/objects/collectables/damaging_item.gd" id="1_lv6in"]
[ext_resource type="Texture2D" uid="uid://dchqy8422eqqy" path="res://assets/kenney_assets/pirate_kit/models/Textures/colormap.png" id="1_ppq4b"]
[ext_resource type="Script" uid="uid://c1e7buf8k76ts" path="res://scripts/collecting/collected_box.gd" id="3_ir8qm"]
[ext_resource type="AudioStream" uid="uid://b5y636cb73k64" path="res://assets/sounds/gunshot.wav" id="4_p0yex"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_b37g6"]
resource_name = "colormap"
cull_mode = 2
albedo_texture = ExtResource("1_ppq4b")
texture_filter = 2

[sub_resource type="ArrayMesh" id="ArrayMesh_154qa"]
_surfaces = [{
"aabb": AABB(-0.31860393, -0.335, -0.2759191, 0.63720787, 0.67, 0.5518382),
"format": 34896613377,
"index_count": 144,
"index_data": PackedByteArray("CgABAAsACwABAAwACQAMAAEACwAMABIAEgAMAAkADQALABIAEwALAA0AEwAKAAsAFAANABIAEwANABQAEgAFABQACQAFABIAFAAEABMACgATAAQAAAAUAAUABAAUAAAABQAJAAIAAAAOAAQABQAVAAAAAgAVAAUAFgAAABUADgAAABYAFQAHABYABAAXAAoAFwAEAA4ACgAXABgAGAABAAoAAQAYAAkACQAYAAgACAAYABcACAACAAkADgADABcAFwADAAgAFgAGAA4ADwADAA4ADgAGAA8AGQAIAAMAAgAIABkAAwAPABkABgAWABAABgAQAA8ADwAQABkAFgAHABAAGQARAAIAEAARABkAEAAHABEAFQACABEAEQAHABUA"),
"lods": [0.09929109, PackedByteArray("CgABAAsACwABAAwACgADAAEABAAKAAsABAADAAoABAALAA0ACwAMAAUADQALAAUACQAMAAEABQAMAAkACAABAAMACQABAAgABAANAAAAAAANAAUAAwAEAA4AAAAOAAQADwADAA4AAwAPAAgAAAAGAA4ADgAGAA8ABgAQAA8ABgAAABAADwAQAAgAEAARAAgAAAAHABAAEAAHABEABQAHAAAACAARAAIABwACABEAAgAHAAUACAACAAkABQAJAAIA"), 0.24951117, PackedByteArray("BgAAAAcAAAAGAAQAAwAEAAYABAABAAAABAADAAEAAwAGAAgABgAHAAgACAABAAMABwACAAgACQABAAgACAACAAkAAAABAAUABQAHAAAAAQAJAAUAAgAHAAUABQAJAAIA"), 0.40496337, PackedByteArray("BAABAAAABAADAAEAAAADAAQAAgABAAMAAwAAAAIAAAABAAUAAQACAAUAAgAAAAUA"), 0.4881541, PackedByteArray("AAABAAIAAgABAAMAAAADAAEAAwAAAAIA")],
"name": "colormap",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 26,
"vertex_data": PackedByteArray("/z9xWP//AACNp4zn5DAAAP//cVj/fwAA/z9xWAAAAAAAAI2n/38AAP+/jaf//wAA5DByGP9/AACNp3IYGs8AAP+/cVgAAAAA//+Np/9/AABxWIzn5DAAAP9/////fwAAGs+M5/9/AABxWIznGs8AAAAAcVj/fwAAcVhyGOQwAAD/fwAA/38AABrPchj/fwAAjaeM5xrPAADkMIzn/38AAP8/jaf//wAA/79xWP//AABxWHIYGs8AAP8/jacAAAAA/7+NpwAAAACNp3IY5DAAAA==")
}]
blend_shape_mode = 0

[sub_resource type="ArrayMesh" id="ArrayMesh_aawo4"]
resource_name = "cannon-ball_cannon-ball"
_surfaces = [{
"aabb": AABB(-0.31860393, -0.335, -0.2759191, 0.63720787, 0.67, 0.5518382),
"attribute_data": PackedByteArray("/3fo5/93Scv/d+jn/3fo5/93Fdj/dxXY/3e19P93tfT/d+jn/3cV2P93Scv/d2XG/3dJy/93Scv/d+jn/3e19P93mPn/d7X0/3e19P93mPn/d7X0/3e19P93mPn/d0nL/3dlxv93Scv/d2XG/3dJy/93mPn/d7X0/3e19P93mPn/d7X0/3e19P93tfT/d5j5/3dJy/93Scv/d2XG/3dlxv93Scv/d2XG/3dJy/93Scv/d7X0/3e19P936Of/d7X0/3e19P93Scv/d0nL/3cV2P936Of/d+jn/3cV2P93Fdj/d+jn/3cV2P93Fdj/dxXY/3fo5/936Of/d0nL/3cV2P93Fdj/d0nL/3e19P936Of/d7X0/3e19P93tfT/d+jn/3fo5/93Fdj/d0nL/3dJy/93Scv/dxXY/3cV2P93Scv/d0nL/3cV2P93Fdj/d0nL/3fo5/936Of/dxXY/3cV2P936Of/d7X0/3e19P936Of/dxXY/3cV2P936Of/d+jn/3fo5/936Of/d7X0/3e19P936Of/d+jn/3cV2P93Fdj/dxXY/3cV2P93Scv/d0nL"),
"format": 34896613399,
"index_count": 144,
"index_data": PackedByteArray("CgABAAsABgASABAAEwARABQAFQAWAA8AFwAYAA0AGQAaABsAHAAHAB0AHgAfACAAIQAiACMAJAAlACYAJwAoAAwAKQAqACsAAgAIACwALAAtAAIALgAvADAAMAAAAC4AMQAyAAkACQAFADEAMwA0ADUANQA2ADMANwADADgAOAA5ADcAOgA7ADwAPAA9ADoAPgA/AEAAQABBAD4AQgBDAA4ADgBEAEIARQBGAEcARwBIAEUASQAEAEoASgBLAEkATABNAE4ATgBPAEwAUABRAFIAUgBTAFAAVABVAFYAVgBXAFQAWABZAFoAWgBbAFgAXABdAF4AXgBfAFwAYABhAGIAYgBjAGAAZABlAGYAZgBnAGQAaABpAGoAagBrAGgA"),
"lods": [0.09929109, PackedByteArray("CgABAAsACwABAAwACgADAAEABAAKAAsABAADAAoABAALAA0ACwAMAAUADQALAAUACQAMAAEABQAMAAkACAABAAMACQABAAgABAANAAAAAAANAAUAAwAEAA4AAAAOAAQADwADAA4AAwAPAAgAAAAGAA4ADgAGAA8ABgAQAA8ABgAAABAADwAQAAgAEAARAAgAAAAHABAAEAAHABEABQAHAAAACAARAAIABwACABEAAgAHAAUACAACAAkABQAJAAIA"), 0.24951117, PackedByteArray("BgAAAAcAAAAGAAQAAwAEAAYABAABAAAABAADAAEAAwAGAAgABgAHAAgACAABAAMABwACAAgACQABAAgACAACAAkAAAABAAUABQAHAAAAAQAJAAUAAgAHAAUABQAJAAIA"), 0.40496337, PackedByteArray("BAABAAAABAADAAEAAAADAAQAAgABAAMAAwAAAAIAAAABAAUAAQACAAUAAgAAAAUA"), 0.4881541, PackedByteArray("AAABAAIAAgABAAMAAAADAAEAAwAAAAIA")],
"material": SubResource("StandardMaterial3D_b37g6"),
"name": "colormap",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 108,
"vertex_data": PackedByteArray("/z9xWP//TpiNp4zn5DAK9P//cVj/fwXC/z9xWAAA5usAAI2n/38owP+/jaf//+uZ5DByGP9/DcKNp3IYGs9wr/+/cVgAAAPq//+Np/9/KMBxWIzn5DAK9P9/////f///Gs+M5/9/6M5xWIznGs9wrwAAcVj/fwXCcVhyGOQwBOb/fwAA/39KyhrPchj/f+jOcVhyGBrPcK//fwAA/3+M4o2nchjkMATm5DByGP9/6M7/fwAA/3+M4uQwjOf/fw3C/3////9/SspxWIznGs9RqP9/////f/+/jaeM5xrPUaj/fwAA/39KyhrPchj/fw3CcVhyGOQwCvT/fwAA/3///42nchjkMAr0cVhyGBrPUaiNp3IYGs9RqP9/AAD/f/+/5DCM5/9/6M5xWIzn5DAE5v9/////f4zi/3////9/jOKNp4zn5DAE5v9/////f0rKGs+M5/9/DcKNp4znGs9wr42nchjkMATmGs9yGP9/6M7/v3FY//9OmI2nchgaz1GocVhyGBrPUaiNp4znGs9wrxrPjOf/fw3C/7+Np///Tpj/v3FY//9OmP8/cVj//06Y/z+Np///Tpj/P42nAADm6/+/cVgAAObr/7+NpwAA5uv/v42n///rmf//jaf/fyjA//9xWP9/KMD/v3FY///rmY2njOcaz1Go/7+Np///Tpj/P42n//9OmHFYjOcaz1GocVhyGOQwBOb/P3FYAAAD6uQwchj/f+jOcVhyGBrPcK/kMHIY/38NwgAAcVj/fyjA/z9xWP//65n/P42n///rmeQwjOf/fw3CcViM5xrPcK9xWIzn5DAK9P8/jacAAObr/7+NpwAA5uuNp4zn5DAK9I2njOfkMATm/7+NpwAAA+r//42n/38FwhrPjOf/f+jOAABxWP9/BcL/P3FYAAAD6v8/jacAAAPqAACNp/9/BcL/P3FYAADm63FYchjkMAr0jadyGOQwCvT/v3FYAADm6///jaf/fwXC/7+NpwAAA+r/v3FYAAAD6v//cVj/fwXC/79xWP//65n//3FY/38owBrPchj/fw3CjadyGBrPcK//P3FY///rmQAAcVj/fyjAAACNp/9/KMD/P42n///rmQAAjaf/fwXC/z+NpwAAA+pxWIzn5DAE5uQwjOf/f+jOMVJ+xnlQxQbCeXYcEJaB+6KWAeN+uxkeKD/Z0PJQvVWacxQZ/JyjFjp5eND/f/+/l7r8DwyvQaqIY8L5q0gH50wil8QCcJc6Qiry0FNjVU4IZ1M3Z0UC8KkxUuMlryi/ZrtLouXjVKr///9/qtXlY5hEs13ZUNZAha85+f9//z/EhoYvVCoZnBkcqlUAAP9//I9nxfaYq8irnKmxVc6sHFO39xiy3Wc71sAlL7zVDC8IZ1M3AnCXOn9GzS0ZHKpVVCoZnLzVDC/WwCUvza2AOX9GzS0xUn7Gf7kx0oJ77ul8hBAW7ml9BH67GR78nKMWXGn9HOZhfjuq1eVjza2AOX+5MdLl41Sqq0gH5+pmmvNnRQLwQiry0Cg/2dACY1vpgETl4RiegMQlryi/DK9Bqjp5eNCCe+7p7ml9BHlQxQZTt/cYFJlkDHacPAaXuvwPiGPC+epmmvNkjOrmPIaI4xCWgfuFrzn5xIaGL3yEEBZ2nDwGFJlkDJpzFBnCeXYc5mF+O1xp/RzZUNZA8lC9VYBE5eECY1vpopYB4xiegMQ8hojjZIzq5vaYq8j8j2fF")
}]
blend_shape_mode = 0
shadow_mesh = SubResource("ArrayMesh_154qa")

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_ir8qm"]
points = PackedVector3Array(0.15568574, 0.14018753, 0.23600952, -0.3054099, -0.11023271, -0.014375367, -0.29851857, -0.101319514, -0.034780104, 0.17826936, -0.2743209, -0.014578526, 0.15774643, 0.11159132, -0.2684124, -0.17752862, 0.2745592, -0.014591717, -0.15692843, -0.111646086, 0.26976025, -0.15720892, -0.111845076, -0.26902416, 0.31016102, 0.1116224, -0.0043968004, 0.15746576, -0.1113922, 0.2691482, -0.014878655, -0.32717368, 0.015940169, -0.15692833, 0.11164601, 0.26976007, 0.015700443, 0.3269089, 0.015927762, 0.15774643, -0.11159132, -0.2684124, -0.15720892, 0.111845076, -0.26902416, -0.309393, 0.11166824, 0.0056673735, 0.31016102, -0.1116224, -0.0043968004, 0.09692657, 0.27409688, -0.15671729, -0.09611518, -0.274335, -0.15685396, -0.09604664, -0.27414027, 0.1580107, -0.09604664, 0.27414027, 0.1580107, 0.17814304, 0.27412602, 0.015836246, 0.10648555, -0.2625764, 0.16726187, -0.20727009, -0.25324315, -0.004386331, 0.106683746, -0.2630672, -0.16630504, -0.10603012, 0.26366538, -0.16668458, 0.10688342, 0.25346372, 0.17803966, 0.15746595, 0.111392334, 0.26914853, -0.30945313, -0.10157099, 0.015841965, 0.30947784, 0.101222225, 0.015799172, -0.014889544, 0.3274061, -0.014682157, 0.10721399, 0.24405795, -0.18745337)

[sub_resource type="CylinderShape3D" id="CylinderShape3D_ir8qm"]
height = 1.6669922
radius = 0.9057617

[sub_resource type="Curve" id="Curve_ir8qm"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.6705883, 0.7417219), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_p0yex"]
curve = SubResource("Curve_ir8qm")

[sub_resource type="Curve" id="Curve_5x6au"]
_data = [Vector2(0, 0.052980185), 0.0, 0.0, 0, 0, Vector2(0.24705884, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_u5ktg"]
curve = SubResource("Curve_5x6au")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_4ayfy"]
emission_shape = 1
emission_sphere_radius = 1.0
direction = Vector3(0, -1, 0)
initial_velocity_min = 1.0
initial_velocity_max = 2.0
gravity = Vector3(0, 5, 0)
scale_min = 0.5
scale_max = 1.5
scale_curve = SubResource("CurveTexture_u5ktg")
color = Color(0.35, 0.35, 0.35, 1)
alpha_curve = SubResource("CurveTexture_p0yex")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_dkpyp"]
transparency = 1
vertex_color_use_as_albedo = true

[sub_resource type="SphereMesh" id="SphereMesh_fxqiu"]
material = SubResource("StandardMaterial3D_dkpyp")
radial_segments = 8
rings = 4

[sub_resource type="Gradient" id="Gradient_ir8qm"]
offsets = PackedFloat32Array(0, 0.65065503, 1)
colors = PackedColorArray(0.9999997, 0.67023665, 0.22853386, 1, 0.973905, 0.4248111, 3.85046e-07, 1, 0.8529517, 0.111642756, 0, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_p0yex"]
gradient = SubResource("Gradient_ir8qm")

[sub_resource type="Curve" id="Curve_h21vy"]
_limits = [0.0, 2.0, 0.0, 1.0]
_data = [Vector2(0, 2), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_5x6au"]
curve = SubResource("Curve_h21vy")

[sub_resource type="Curve" id="Curve_u5ktg"]
_data = [Vector2(0, 0.052980185), 0.0, 0.0, 0, 0, Vector2(0.24705884, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_4ayfy"]
curve = SubResource("Curve_u5ktg")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_lcyoo"]
emission_shape = 1
emission_sphere_radius = 1.0
direction = Vector3(0, -1, 0)
spread = 90.0
initial_velocity_min = 2.0
initial_velocity_max = 4.0
gravity = Vector3(0, 5, 0)
scale_min = 0.5
scale_max = 1.5
scale_curve = SubResource("CurveTexture_4ayfy")
color = Color(0.9939988, 0.72147125, 0, 1)
color_ramp = SubResource("GradientTexture1D_p0yex")
emission_curve = SubResource("CurveTexture_5x6au")

[sub_resource type="Curve" id="Curve_exmnq"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.36078435, 0.9246689), 0.0, 0.0, 0, 0, Vector2(0.99607855, 0.042218566), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_dyihl"]
curve = SubResource("Curve_exmnq")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_xmlee"]
particle_flag_align_y = true
spread = 180.0
initial_velocity_min = 12.0
initial_velocity_max = 14.0
scale_min = 0.5
scale_max = 1.5
scale_curve = SubResource("CurveTexture_dyihl")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_uioj0"]
albedo_color = Color(0.8741271, 0.3039858, 0.10187247, 1)
emission_enabled = true
emission = Color(0.830442, 0.39642075, 0, 1)
emission_energy_multiplier = 2.0

[sub_resource type="CylinderMesh" id="CylinderMesh_tf36p"]
material = SubResource("StandardMaterial3D_uioj0")
top_radius = 0.1
bottom_radius = 0.0
cap_bottom = false

[node name="DamagingBall" type="RigidBody3D"]
collision_layer = 0
collision_mask = 0
script = ExtResource("1_lv6in")

[node name="cannon-ball" type="MeshInstance3D" parent="."]
transform = Transform3D(2.5, 0, 0, 0, 2.5, 0, 0, 0, 2.5, 0, 0, 0)
mesh = SubResource("ArrayMesh_aawo4")
skeleton = NodePath("")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(2.5, 0, 0, 0, 2.5, 0, 0, 0, 2.5, 0, 0, 0)
shape = SubResource("ConvexPolygonShape3D_ir8qm")

[node name="CollectedBoxArea3D" type="Area3D" parent="."]
collision_layer = 0
collision_mask = 2
script = ExtResource("3_ir8qm")
metadata/_custom_type_script = "uid://c1e7buf8k76ts"

[node name="CollisionShape3D" type="CollisionShape3D" parent="CollectedBoxArea3D"]
shape = SubResource("CylinderShape3D_ir8qm")

[node name="Particles" type="Node3D" parent="."]

[node name="Smoke" type="GPUParticles3D" parent="Particles"]
emitting = false
amount = 12
lifetime = 2.0
one_shot = true
explosiveness = 1.0
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_4ayfy")
draw_pass_1 = SubResource("SphereMesh_fxqiu")

[node name="Fire" type="GPUParticles3D" parent="Particles"]
emitting = false
amount = 12
one_shot = true
explosiveness = 1.0
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_lcyoo")
draw_pass_1 = SubResource("SphereMesh_fxqiu")

[node name="Debri" type="GPUParticles3D" parent="Particles"]
emitting = false
amount = 24
lifetime = 0.3
one_shot = true
explosiveness = 1.0
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_xmlee")
draw_pass_1 = SubResource("CylinderMesh_tf36p")

[node name="ExplosionSound" type="AudioStreamPlayer3D" parent="Particles"]
stream = ExtResource("4_p0yex")
