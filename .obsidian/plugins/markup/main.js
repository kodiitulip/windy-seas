/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MarkupPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var NUM_COLORS = 5;
var NUM_COMMANDS = NUM_COLORS * 2;
var DEFAULT_SETTINGS = {
  Colors: [
    ["Red", "#FF0A0A"],
    ["Green", "#00C800"],
    ["Orange", "#DD7700"],
    ["Yellow", "#FFFF00"],
    ["Teal", "#00FFFF"]
  ],
  HighlightColors: [
    ["Black on Yellow", "#000000", "#FFFF00"],
    ["Black on Green", "#000000", "#00FF00"],
    ["White on Red", "#FFFFFF", "#FF0000"],
    ["Black on Teal", "#000000", "#00FFFF"],
    ["White on Purple", "#FFFFFF", "#FF00FF"]
  ]
};
var MarkupPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.CommandIDs = new Array(NUM_COMMANDS).fill("");
  }
  async onload() {
    await this.loadSettings();
    this.addCommand({
      id: "markup-toggle-bold",
      name: "Toggle bold status",
      editorCallback: () => {
        this.BoldSelected = !this.BoldSelected;
        new Notice("Markup: Bold status " + (this.BoldSelected ? "ON" : "OFF"));
      }
    });
    this.addCommand({
      id: "markup-toggle-italic",
      name: "Toggle italic status",
      editorCallback: () => {
        this.ItalicSelected = !this.ItalicSelected;
        new Notice("Markup: Italic status " + (this.ItalicSelected ? "ON" : "OFF"));
      }
    });
    this.RegisterCommands();
    {
      const ColorStatusBarItem = this.addStatusBarItem();
      (0, import_obsidian.setIcon)(ColorStatusBarItem, "palette");
      (0, import_obsidian.setTooltip)(
        ColorStatusBarItem,
        "Color selected text",
        { placement: "top" }
      );
      ColorStatusBarItem.classList.add("mod-clickable");
      ColorStatusBarItem.addEventListener("click", this.OpenColorMenu);
      ColorStatusBarItem.Plugin = this;
    }
    {
      const HighlightStatusBarItem = this.addStatusBarItem();
      (0, import_obsidian.setIcon)(HighlightStatusBarItem, "highlighter");
      (0, import_obsidian.setTooltip)(
        HighlightStatusBarItem,
        "Highlight selected text",
        { placement: "top" }
      );
      HighlightStatusBarItem.classList.add("mod-clickable");
      HighlightStatusBarItem.addEventListener("click", this.OpenHighlightMenu);
      HighlightStatusBarItem.Plugin = this;
    }
    {
      this.addCommand({
        id: "markup-remove-markup",
        name: "Remove markup from selected text",
        editorCallback: () => {
          this.RemoveSelectedTextMarkup();
        }
      });
      const RemoveMarkupStatusBarItem = this.addStatusBarItem();
      (0, import_obsidian.setIcon)(RemoveMarkupStatusBarItem, "remove-formatting");
      (0, import_obsidian.setTooltip)(
        RemoveMarkupStatusBarItem,
        "Remove markup from selected text",
        { placement: "top" }
      );
      RemoveMarkupStatusBarItem.classList.add("mod-clickable");
      RemoveMarkupStatusBarItem.addEventListener("click", this.OpenRemoveMarkupMenu);
      RemoveMarkupStatusBarItem.Plugin = this;
    }
    this.addSettingTab(new MarkupSettingTab(this.app, this));
  }
  onunload() {
  }
  async loadSettings() {
    this.Settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.Settings);
  }
  RegisterCommands() {
    for (let CommandIndex = 0; CommandIndex < NUM_COMMANDS; ++CommandIndex) {
      if (this.CommandIDs[CommandIndex]) {
        this.removeCommand(this.CommandIDs[CommandIndex]);
      }
    }
    for (let ColorIndex = 0; ColorIndex < NUM_COLORS; ++ColorIndex) {
      this.addCommand({
        id: "markup-color-text-" + (ColorIndex + 1),
        name: "Color selected text (" + this.Settings.Colors[ColorIndex][0] + ")",
        editorCallback: () => {
          this.ColorSelectedText(this.Settings.Colors[ColorIndex]);
        }
      });
    }
    for (let HighlightIndex = 0; HighlightIndex < NUM_COLORS; ++HighlightIndex) {
      this.addCommand({
        id: "markup-highlight-text-" + (HighlightIndex + 1),
        name: "Highlight selected text (" + this.Settings.HighlightColors[HighlightIndex][0] + ")",
        editorCallback: () => {
          this.HighlightSelectedText(this.Settings.HighlightColors[HighlightIndex]);
        }
      });
    }
  }
  GetEditor() {
    const Workspace = this.app.workspace;
    if (!Workspace) {
      return null;
    }
    if (!Workspace.activeEditor) {
      return null;
    }
    const EditorObj = Workspace.activeEditor.editMode.editor;
    if (!EditorObj) {
      return null;
    }
    return EditorObj;
  }
  GetSelectionPositions() {
    const EditorV = this.GetEditor();
    if (!EditorV) {
      return [{}, {}];
    }
    const SelectStartP = EditorV.getCursor("from");
    const SelectEndP = EditorV.getCursor("to");
    return [
      EditorV.getCursor("from"),
      EditorV.getCursor("to"),
      EditorV.getCursor("anchor"),
      EditorV.getCursor("head")
    ];
  }
  RemoveSelectedTextMarkup() {
    const EditorV = this.GetEditor();
    if (!EditorV) {
      return;
    }
    if (!EditorV.somethingSelected()) {
      return;
    }
    const PrefixRegex = /<span style="[^"]*">/g;
    const PostfixRegex = "</span>";
    let NewSelections = [];
    for (let SelectionID = 0; SelectionID < EditorV.listSelections().length; ++SelectionID) {
      const Selections = EditorV.listSelections();
      const ThisSelection = Selections[SelectionID];
      const Anchor = ThisSelection.anchor;
      const Head = ThisSelection.head;
      const From = Anchor.line > Head.line || Anchor.ch > Head.ch ? Head : Anchor;
      const To = Anchor.line > Head.line || Anchor.ch > Head.ch ? Anchor : Head;
      const CurSelection = EditorV.getRange(From, To);
      const Hits = CurSelection.match(PrefixRegex);
      if (!Hits) {
        return;
      }
      const NumHits = Hits.length;
      if (!NumHits) {
        return;
      }
      const NewString = CurSelection.replaceAll(PrefixRegex, "").replaceAll(PostfixRegex, "");
      EditorV.replaceRange(NewString, From, To);
    }
  }
  MarkupSelectedText(ColorStr, HighlightStr) {
    const EditorV = this.GetEditor();
    if (!EditorV) {
      return;
    }
    if (!EditorV.somethingSelected()) {
      new Notice("No text selected!");
      return;
    }
    this.RemoveSelectedTextMarkup();
    const Bold = this.BoldSelected;
    const Italic = this.ItalicSelected;
    const BoldStr = Bold ? "font-weight:bold;" : "";
    const ItalicStr = Italic ? "font-style:italic;" : "";
    const StyleStr = ColorStr + HighlightStr + BoldStr + ItalicStr;
    for (let SelectionID = 0; SelectionID < EditorV.listSelections().length; ++SelectionID) {
      const Selections2 = EditorV.listSelections();
      const ThisSelection = Selections2[SelectionID];
      const Anchor = ThisSelection.anchor;
      const Head = ThisSelection.head;
      const From = Anchor.line > Head.line || Anchor.ch > Head.ch ? Head : Anchor;
      const To = Anchor.line > Head.line || Anchor.ch > Head.ch ? Anchor : Head;
      const Prefix = '<span style="' + StyleStr + '">';
      const CurSelection = EditorV.getRange(From, To);
      const Postfix = "</span>";
      EditorV.replaceRange(Prefix + CurSelection + Postfix, From, To);
    }
    let NewSelections = [];
    const Selections = EditorV.listSelections();
    for (let SelectionID = 0; SelectionID < Selections.length; ++SelectionID) {
      const ThisSelection = Selections[SelectionID];
      const Head = ThisSelection.head;
      const CurP = Head.ch;
      let Line = Head.line;
      let NewP = CurP >= EditorV.getLine(Line).length ? CurP : CurP + 1;
      if (NewP == CurP && Line != EditorV.lastLine()) {
        NewP = 0;
        ++Line;
      }
      const NewHead = { ch: NewP, line: Line };
      NewSelections.push({ anchor: NewHead, head: NewHead });
    }
    EditorV.setSelections(NewSelections, 0);
  }
  ColorSelectedText(Color) {
    const ColorStr = "color:" + Color[1] + ";";
    this.MarkupSelectedText(ColorStr, "");
  }
  HighlightSelectedText(Colors) {
    const ColorStr = "color:" + Colors[1] + ";";
    const HighlightStr = "background:" + Colors[2] + "BB;";
    this.MarkupSelectedText(ColorStr, HighlightStr);
  }
  DoCheckboxItem(Event, Menu2, Setting2, Title, Icon) {
  }
  OpenColorMenu(Event) {
    const EditorV = this.Plugin.GetEditor();
    if (!EditorV) {
      return;
    }
    const ColorMenu = new import_obsidian.Menu();
    var ItemID = 0;
    ColorMenu.addItem(
      (BoldElement) => {
        BoldElement.setIcon("bold").setTitle("Bold").setChecked(this.Plugin.BoldSelected).onClick(() => {
          this.Plugin.BoldSelected = !this.Plugin.BoldSelected;
          BoldElement.setChecked(this.Plugin.BoldSelected);
          if (!this.Plugin.BoldSelected) {
            BoldElement.checkIconEl = null;
          }
          ColorMenu.showAtMouseEvent(Event);
        });
      }
    );
    ++ItemID;
    ColorMenu.addItem(
      (ItalicElement) => {
        ItalicElement.setIcon("italic").setTitle("Italic").setChecked(this.Plugin.ItalicSelected).onClick(() => {
          this.Plugin.ItalicSelected = !this.Plugin.ItalicSelected;
          ItalicElement.setChecked(this.Plugin.ItalicSelected);
          if (!this.Plugin.ItalicSelected) {
            ItalicElement.checkIconEl = null;
          }
          ColorMenu.showAtMouseEvent(Event);
        });
      }
    );
    ++ItemID;
    ColorMenu.addSeparator();
    ++ItemID;
    for (let ColorIndex = 0; ColorIndex < NUM_COLORS; ++ColorIndex) {
      ColorMenu.addItem(
        (ColorItem) => {
          ColorItem.setIcon("case-sensitive").setTitle(this.Plugin.Settings.Colors[ColorIndex][0]).setChecked(false).onClick(() => {
            this.Plugin.ColorSelectedText(this.Plugin.Settings.Colors[ColorIndex]);
            EditorV.focus();
          });
        }
      );
      const ItemEl = ColorMenu.items[ItemID];
      ItemEl.iconEl.style.color = this.Plugin.Settings.Colors[ColorIndex][1];
      ++ItemID;
    }
    ColorMenu.showAtMouseEvent(Event);
  }
  OpenHighlightMenu(Event) {
    const EditorV = this.Plugin.GetEditor();
    if (!EditorV) {
      return;
    }
    const HighlightMenu = new import_obsidian.Menu();
    var ItemID = 0;
    HighlightMenu.addItem(
      (BoldElement) => {
        BoldElement.setIcon("bold").setTitle("Bold").setChecked(this.Plugin.BoldSelected).onClick(() => {
          this.Plugin.BoldSelected = !this.Plugin.BoldSelected;
          BoldElement.setChecked(this.Plugin.BoldSelected);
          if (!this.Plugin.BoldSelected) {
            BoldElement.checkIconEl = null;
          }
          HighlightMenu.showAtMouseEvent(Event);
        });
      }
    );
    ++ItemID;
    HighlightMenu.addItem(
      (ItalicElement) => {
        ItalicElement.setIcon("italic").setTitle("Italic").setChecked(this.Plugin.ItalicSelected).onClick(() => {
          this.Plugin.ItalicSelected = !this.Plugin.ItalicSelected;
          ItalicElement.setChecked(this.Plugin.ItalicSelected);
          if (!this.Plugin.ItalicSelected) {
            ItalicElement.checkIconEl = null;
          }
          HighlightMenu.showAtMouseEvent(Event);
        });
      }
    );
    ++ItemID;
    HighlightMenu.addSeparator();
    ++ItemID;
    for (let HighlightIndex = 0; HighlightIndex < NUM_COLORS; ++HighlightIndex) {
      HighlightMenu.addItem(
        (HighlightItem) => {
          HighlightItem.setIcon("case-sensitive").setTitle(this.Plugin.Settings.HighlightColors[HighlightIndex][0]).setChecked(false).onClick(() => {
            this.Plugin.HighlightSelectedText(this.Plugin.Settings.HighlightColors[HighlightIndex]);
            EditorV.focus();
          });
        }
      );
      const ItemEl = HighlightMenu.items[ItemID];
      ItemEl.iconEl.style.color = this.Plugin.Settings.HighlightColors[HighlightIndex][1];
      ItemEl.iconEl.style.backgroundColor = this.Plugin.Settings.HighlightColors[HighlightIndex][2];
      ++ItemID;
    }
    HighlightMenu.showAtMouseEvent(Event);
  }
  OpenRemoveMarkupMenu(Event) {
    const EditorV = this.Plugin.GetEditor();
    if (!EditorV) {
      return;
    }
    if (!EditorV.somethingSelected()) {
      return;
    }
    EditorV.focus();
    this.Plugin.RemoveSelectedTextMarkup();
  }
};
var MarkupSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(AppObj, PluginObj) {
    super(AppObj, PluginObj);
    this.PluginObj = PluginObj;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    {
      new import_obsidian.Setting(containerEl).setName("Color Palette").setDesc("Set the available colored text menu options.").setHeading();
      for (let ColorIndex = 0; ColorIndex < NUM_COLORS; ++ColorIndex) {
        new import_obsidian.Setting(containerEl).setName("Color " + (ColorIndex + 1)).addExtraButton(
          (ExtraButton) => ExtraButton.setIcon("rotate-ccw").setTooltip("Restore default", { placement: "top" }).onClick(async () => {
            this.PluginObj.Settings.Colors[ColorIndex] = DEFAULT_SETTINGS.Colors[ColorIndex];
            await this.PluginObj.saveSettings();
            this.display();
          })
        ).addTextArea(
          (ColorPicker) => ColorPicker.setValue(this.PluginObj.Settings.Colors[ColorIndex][0]).onChange(async (Value) => {
            this.PluginObj.Settings.Colors[ColorIndex][0] = Value;
            await this.PluginObj.saveSettings();
            this.PluginObj.RegisterCommands();
          })
        ).addColorPicker(
          (ColorPicker) => ColorPicker.setValue(this.PluginObj.Settings.Colors[ColorIndex][1]).onChange(async (Value) => {
            this.PluginObj.Settings.Colors[ColorIndex][1] = Value;
            await this.PluginObj.saveSettings();
          })
        );
      }
    }
    {
      new import_obsidian.Setting(containerEl).setName("Highlight Palette").setDesc("Set the available highlighter menu options. Left value is the text color, right is the background.").setHeading();
      for (let HighlightIndex = 0; HighlightIndex < NUM_COLORS; ++HighlightIndex) {
        new import_obsidian.Setting(containerEl).setName("Highlight " + (HighlightIndex + 1)).addExtraButton(
          (ExtraButton) => ExtraButton.setIcon("rotate-ccw").setTooltip("Restore default", { placement: "top" }).onClick(async () => {
            this.PluginObj.Settings.HighlightColors[HighlightIndex] = DEFAULT_SETTINGS.HighlightColors[HighlightIndex];
            await this.PluginObj.saveSettings();
            this.display();
          })
        ).addTextArea(
          (HighlightPicker) => HighlightPicker.setValue(this.PluginObj.Settings.HighlightColors[HighlightIndex][0]).onChange(async (Value) => {
            this.PluginObj.Settings.HighlightColors[HighlightIndex][0] = Value;
            await this.PluginObj.saveSettings();
            this.PluginObj.RegisterCommands();
          })
        ).addColorPicker(
          (HighlightPicker) => HighlightPicker.setValue(this.PluginObj.Settings.HighlightColors[HighlightIndex][1]).onChange(async (Value) => {
            this.PluginObj.Settings.HighlightColors[HighlightIndex][1] = Value;
            await this.PluginObj.saveSettings();
          })
        ).addColorPicker(
          (HighlightPicker) => HighlightPicker.setValue(this.PluginObj.Settings.HighlightColors[HighlightIndex][2]).onChange(async (Value) => {
            this.PluginObj.Settings.HighlightColors[HighlightIndex][2] = Value;
            await this.PluginObj.saveSettings();
          })
        );
      }
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBNZW51LCBzZXRJY29uLCBzZXRUb29sdGlwIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcblxyXG5jb25zdCBOVU1fQ09MT1JTID0gNTtcclxuY29uc3QgTlVNX0NPTU1BTkRTID0gTlVNX0NPTE9SUyoyO1xyXG5cclxuaW50ZXJmYWNlIG1hcmt1cF9wbHVnaW5fc2V0dGluZ3Mge1xyXG4gICAgQ29sb3JzW05VTV9DT0xPUlNdOiBbc3RyaW5nLCBzdHJpbmddOyAvLyBuYW1lLCB0ZXh0IGNvbG9yXHJcbiAgICBIaWdobGlnaHRDb2xvcnNbTlVNX0NPTE9SU106IFtzdHJpbmcsIHN0cmluZywgc3RyaW5nXTsgLy8gbmFtZSwgdGV4dCBjb2xvciwgYmFja2dyb3VuZCBjb2xvclxyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBtYXJrdXBfcGx1Z2luX3NldHRpbmdzID0ge1xyXG4gICAgQ29sb3JzOiBbXHJcbiAgICAgICAgWyBcIlJlZFwiLCAgICBcIiNGRjBBMEFcIiBdLFxyXG4gICAgICAgIFsgXCJHcmVlblwiLCAgXCIjMDBDODAwXCIgXSxcclxuICAgICAgICBbIFwiT3JhbmdlXCIsIFwiI0RENzcwMFwiIF0sXHJcbiAgICAgICAgWyBcIlllbGxvd1wiLCBcIiNGRkZGMDBcIiBdLFxyXG4gICAgICAgIFsgXCJUZWFsXCIsICAgXCIjMDBGRkZGXCIgXVxyXG4gICAgXSxcclxuXHJcbiAgICBIaWdobGlnaHRDb2xvcnM6IFtcclxuICAgICAgICBbIFwiQmxhY2sgb24gWWVsbG93XCIsIFwiIzAwMDAwMFwiLCBcIiNGRkZGMDBcIiBdLFxyXG4gICAgICAgIFsgXCJCbGFjayBvbiBHcmVlblwiLCAgXCIjMDAwMDAwXCIsIFwiIzAwRkYwMFwiIF0sXHJcbiAgICAgICAgWyBcIldoaXRlIG9uIFJlZFwiLCAgICBcIiNGRkZGRkZcIiwgXCIjRkYwMDAwXCIgXSxcclxuICAgICAgICBbIFwiQmxhY2sgb24gVGVhbFwiLCAgIFwiIzAwMDAwMFwiLCBcIiMwMEZGRkZcIiBdLFxyXG4gICAgICAgIFsgXCJXaGl0ZSBvbiBQdXJwbGVcIiwgXCIjRkZGRkZGXCIsIFwiI0ZGMDBGRlwiIF1cclxuICAgIF1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFya3VwUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuICAgIFNldHRpbmdzOiBtYXJrdXBfcGx1Z2luX3NldHRpbmdzO1xyXG4gICAgQm9sZFNlbGVjdGVkOiBmYWxzZTtcclxuICAgIEl0YWxpY1NlbGVjdGVkOiBmYWxzZTtcclxuXHJcbiAgICBDb21tYW5kSURzOiBzdHJpbmdbXSA9IG5ldyBBcnJheShOVU1fQ09NTUFORFMpLmZpbGwoXCJcIik7XHJcbiAgICBcclxuICAgIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cclxuICAgICAgICAvLyBUb2dnbGUgQm9sZCBzdGF0dXNcclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogXCJtYXJrdXAtdG9nZ2xlLWJvbGRcIixcclxuICAgICAgICAgICAgbmFtZTogXCJUb2dnbGUgYm9sZCBzdGF0dXNcIixcclxuICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuQm9sZFNlbGVjdGVkID0gIXRoaXMuQm9sZFNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk1hcmt1cDogQm9sZCBzdGF0dXMgXCIgKyAoKHRoaXMuQm9sZFNlbGVjdGVkKT8gXCJPTlwiIDogXCJPRkZcIikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6IFwibWFya3VwLXRvZ2dsZS1pdGFsaWNcIixcclxuICAgICAgICAgICAgbmFtZTogXCJUb2dnbGUgaXRhbGljIHN0YXR1c1wiLFxyXG4gICAgICAgICAgICBlZGl0b3JDYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5JdGFsaWNTZWxlY3RlZCA9ICF0aGlzLkl0YWxpY1NlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk1hcmt1cDogSXRhbGljIHN0YXR1cyBcIiArICgodGhpcy5JdGFsaWNTZWxlY3RlZCk/IFwiT05cIiA6IFwiT0ZGXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHR0aGlzLlJlZ2lzdGVyQ29tbWFuZHMoKTtcclxuXHRcclxuICAgICAgICAvLyBDb2xvcmVkIFRleHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IENvbG9yU3RhdHVzQmFySXRlbSA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xyXG4gICAgICAgICAgICBzZXRJY29uKENvbG9yU3RhdHVzQmFySXRlbSwgXCJwYWxldHRlXCIpO1xyXG4gICAgICAgICAgICBzZXRUb29sdGlwKENvbG9yU3RhdHVzQmFySXRlbSxcclxuICAgICAgICAgICAgICAgICAgICAgICBcIkNvbG9yIHNlbGVjdGVkIHRleHRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICB7IHBsYWNlbWVudDogXCJ0b3BcIiB9KTtcclxuICAgICAgICAgICAgQ29sb3JTdGF0dXNCYXJJdGVtLmNsYXNzTGlzdC5hZGQoXCJtb2QtY2xpY2thYmxlXCIpO1xyXG4gICAgICAgICAgICBDb2xvclN0YXR1c0Jhckl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuT3BlbkNvbG9yTWVudSk7XHJcbiAgICAgICAgICAgIENvbG9yU3RhdHVzQmFySXRlbS5QbHVnaW4gPSB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSGlnaGxpZ2h0ZWQgVGV4dFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY29uc3QgSGlnaGxpZ2h0U3RhdHVzQmFySXRlbSA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xyXG4gICAgICAgICAgICBzZXRJY29uKEhpZ2hsaWdodFN0YXR1c0Jhckl0ZW0sIFwiaGlnaGxpZ2h0ZXJcIik7XHJcbiAgICAgICAgICAgIHNldFRvb2x0aXAoSGlnaGxpZ2h0U3RhdHVzQmFySXRlbSxcclxuICAgICAgICAgICAgICAgICAgICAgICBcIkhpZ2hsaWdodCBzZWxlY3RlZCB0ZXh0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgeyBwbGFjZW1lbnQ6IFwidG9wXCIgfSk7XHJcbiAgICAgICAgICAgIEhpZ2hsaWdodFN0YXR1c0Jhckl0ZW0uY2xhc3NMaXN0LmFkZChcIm1vZC1jbGlja2FibGVcIik7XHJcbiAgICAgICAgICAgIEhpZ2hsaWdodFN0YXR1c0Jhckl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuT3BlbkhpZ2hsaWdodE1lbnUpO1xyXG4gICAgICAgICAgICBIaWdobGlnaHRTdGF0dXNCYXJJdGVtLlBsdWdpbiA9IHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZW1vdmUgbWFya3VwXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICAgICAgaWQ6IFwibWFya3VwLXJlbW92ZS1tYXJrdXBcIixcclxuICAgICAgICAgICAgICAgIG5hbWU6IFwiUmVtb3ZlIG1hcmt1cCBmcm9tIHNlbGVjdGVkIHRleHRcIixcclxuICAgICAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5SZW1vdmVTZWxlY3RlZFRleHRNYXJrdXAoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBSZW1vdmVNYXJrdXBTdGF0dXNCYXJJdGVtID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XHJcbiAgICAgICAgICAgIHNldEljb24oUmVtb3ZlTWFya3VwU3RhdHVzQmFySXRlbSwgXCJyZW1vdmUtZm9ybWF0dGluZ1wiKTtcclxuICAgICAgICAgICAgc2V0VG9vbHRpcChSZW1vdmVNYXJrdXBTdGF0dXNCYXJJdGVtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgIFwiUmVtb3ZlIG1hcmt1cCBmcm9tIHNlbGVjdGVkIHRleHRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICB7IHBsYWNlbWVudDogXCJ0b3BcIiB9KTtcclxuICAgICAgICAgICAgUmVtb3ZlTWFya3VwU3RhdHVzQmFySXRlbS5jbGFzc0xpc3QuYWRkKFwibW9kLWNsaWNrYWJsZVwiKTtcclxuICAgICAgICAgICAgUmVtb3ZlTWFya3VwU3RhdHVzQmFySXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5PcGVuUmVtb3ZlTWFya3VwTWVudSk7XHJcbiAgICAgICAgICAgIFJlbW92ZU1hcmt1cFN0YXR1c0Jhckl0ZW0uUGx1Z2luID0gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRoaXMgYWRkcyBhIHNldHRpbmdzIHRhYiBzbyB0aGUgdXNlciBjYW4gY29uZmlndXJlIHZhcmlvdXMgYXNwZWN0cyBvZiB0aGUgcGx1Z2luXHJcbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBNYXJrdXBTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG9udW5sb2FkKCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgdGhpcy5TZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5TZXR0aW5ncyk7XHJcbiAgICB9XHJcblxyXG4gICAgUmVnaXN0ZXJDb21tYW5kcygpIHtcclxuXHRmb3IgKGxldCBDb21tYW5kSW5kZXggPSAwO1xyXG5cdCAgICAgQ29tbWFuZEluZGV4IDwgTlVNX0NPTU1BTkRTO1xyXG5cdCAgICAgKytDb21tYW5kSW5kZXgpIHtcclxuXHQgICAgaWYgKHRoaXMuQ29tbWFuZElEc1tDb21tYW5kSW5kZXhdKSB7XHJcblx0XHR0aGlzLnJlbW92ZUNvbW1hbmQodGhpcy5Db21tYW5kSURzW0NvbW1hbmRJbmRleF0pO1xyXG5cdCAgICB9XHJcblx0fVxyXG5cclxuXHRmb3IgKGxldCBDb2xvckluZGV4ID0gMDtcclxuICAgICAgICAgICAgIENvbG9ySW5kZXggPCBOVU1fQ09MT1JTO1xyXG4gICAgICAgICAgICAgKytDb2xvckluZGV4KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgICAgICBpZDogXCJtYXJrdXAtY29sb3ItdGV4dC1cIiArIChDb2xvckluZGV4ICsgMSksXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIkNvbG9yIHNlbGVjdGVkIHRleHQgKFwiICsgdGhpcy5TZXR0aW5ncy5Db2xvcnNbQ29sb3JJbmRleF1bMF0gKyBcIilcIixcclxuICAgICAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Db2xvclNlbGVjdGVkVGV4dCh0aGlzLlNldHRpbmdzLkNvbG9yc1tDb2xvckluZGV4XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcblx0Zm9yIChsZXQgSGlnaGxpZ2h0SW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgSGlnaGxpZ2h0SW5kZXggPCBOVU1fQ09MT1JTO1xyXG4gICAgICAgICAgICAgKytIaWdobGlnaHRJbmRleCkge1xyXG4gICAgICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICAgICAgaWQ6IFwibWFya3VwLWhpZ2hsaWdodC10ZXh0LVwiICsgKEhpZ2hsaWdodEluZGV4ICsgMSksXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBcIkhpZ2hsaWdodCBzZWxlY3RlZCB0ZXh0IChcIiArIHRoaXMuU2V0dGluZ3MuSGlnaGxpZ2h0Q29sb3JzW0hpZ2hsaWdodEluZGV4XVswXSArIFwiKVwiLFxyXG4gICAgICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkhpZ2hsaWdodFNlbGVjdGVkVGV4dCh0aGlzLlNldHRpbmdzLkhpZ2hsaWdodENvbG9yc1tIaWdobGlnaHRJbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIEdldEVkaXRvcigpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgV29ya3NwYWNlID0gdGhpcy5hcHAud29ya3NwYWNlO1xyXG4gICAgICAgIGlmICghV29ya3NwYWNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcblx0aWYgKCFXb3Jrc3BhY2UuYWN0aXZlRWRpdG9yKSB7XHJcblx0ICAgIHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgRWRpdG9yT2JqID0gV29ya3NwYWNlLmFjdGl2ZUVkaXRvci5lZGl0TW9kZS5lZGl0b3I7XHJcblx0aWYgKCFFZGl0b3JPYmopIHtcclxuXHQgICAgcmV0dXJuIG51bGw7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gRWRpdG9yT2JqO1xyXG4gICAgfVxyXG5cclxuICAgIEdldFNlbGVjdGlvblBvc2l0aW9ucygpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgRWRpdG9yViA9IHRoaXMuR2V0RWRpdG9yKCk7XHJcbiAgICAgICAgaWYgKCFFZGl0b3JWKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbe30sIHt9XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVE9ETzogSGFuZGxlIG11bHRpcGxlIGN1cnNvcnNcclxuICAgICAgICBjb25zdCBTZWxlY3RTdGFydFAgPSBFZGl0b3JWLmdldEN1cnNvcihcImZyb21cIik7XHJcbiAgICAgICAgY29uc3QgU2VsZWN0RW5kUCA9IEVkaXRvclYuZ2V0Q3Vyc29yKFwidG9cIik7XHJcbiAgICAgICAgcmV0dXJuIFsgRWRpdG9yVi5nZXRDdXJzb3IoXCJmcm9tXCIpLFxyXG4gICAgICAgICAgICAgICAgIEVkaXRvclYuZ2V0Q3Vyc29yKFwidG9cIiksXHJcbiAgICAgICAgICAgICAgICAgRWRpdG9yVi5nZXRDdXJzb3IoXCJhbmNob3JcIiksXHJcbiAgICAgICAgICAgICAgICAgRWRpdG9yVi5nZXRDdXJzb3IoXCJoZWFkXCIpLFxyXG4gICAgICAgICAgICAgICBdXHJcbiAgICB9XHJcblxyXG4gICAgUmVtb3ZlU2VsZWN0ZWRUZXh0TWFya3VwKClcclxuICAgIHtcclxuICAgICAgICAvLyBWZXJpZnkgd2UgaGF2ZSBhIHNlbGVjdGlvblxyXG4gICAgICAgIGNvbnN0IEVkaXRvclYgPSB0aGlzLkdldEVkaXRvcigpO1xyXG4gICAgICAgIGlmICghRWRpdG9yVikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghRWRpdG9yVi5zb21ldGhpbmdTZWxlY3RlZCgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblx0XHJcbiAgICAgICAgLy8gT3VyIHNlYXJjaCBxdWVyaWVzXHJcbiAgICAgICAgY29uc3QgUHJlZml4UmVnZXggPSAvPHNwYW4gc3R5bGU9XCJbXlwiXSpcIj4vZztcclxuICAgICAgICBjb25zdCBQb3N0Zml4UmVnZXggPSBcIjwvc3Bhbj5cIjtcclxuXHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIG91ciBzZWxlY3Rpb25zXHJcblx0bGV0IE5ld1NlbGVjdGlvbnMgPSBbXTtcclxuXHRmb3IgKGxldCBTZWxlY3Rpb25JRCA9IDA7XHJcblx0ICAgICBTZWxlY3Rpb25JRCA8IEVkaXRvclYubGlzdFNlbGVjdGlvbnMoKS5sZW5ndGg7XHJcblx0ICAgICArK1NlbGVjdGlvbklEKSB7XHJcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGlzIGlzIGV2ZW4gdW5tYXJrdXAtYWJsZVxyXG5cdCAgICBjb25zdCBTZWxlY3Rpb25zID0gRWRpdG9yVi5saXN0U2VsZWN0aW9ucygpO1xyXG5cdCAgICBjb25zdCBUaGlzU2VsZWN0aW9uID0gU2VsZWN0aW9uc1tTZWxlY3Rpb25JRF07XHJcblx0ICAgIGNvbnN0IEFuY2hvciA9IFRoaXNTZWxlY3Rpb24uYW5jaG9yO1xyXG5cdCAgICBjb25zdCBIZWFkID0gVGhpc1NlbGVjdGlvbi5oZWFkO1xyXG5cdCAgICBjb25zdCBGcm9tID0gKEFuY2hvci5saW5lID4gSGVhZC5saW5lIHx8IEFuY2hvci5jaCA+IEhlYWQuY2gpPyBIZWFkIDogQW5jaG9yO1xyXG5cdCAgICBjb25zdCBUbyA9IChBbmNob3IubGluZSA+IEhlYWQubGluZSB8fCBBbmNob3IuY2ggPiBIZWFkLmNoKT8gQW5jaG9yIDogSGVhZDtcclxuXHJcblx0ICAgIGNvbnN0IEN1clNlbGVjdGlvbiA9IEVkaXRvclYuZ2V0UmFuZ2UoRnJvbSwgVG8pO1xyXG5cdCAgICBjb25zdCBIaXRzID0gQ3VyU2VsZWN0aW9uLm1hdGNoKFByZWZpeFJlZ2V4KTtcclxuXHQgICAgaWYgKCFIaXRzKSB7XHJcblx0XHRyZXR1cm47XHJcblx0ICAgIH1cclxuXHQgICAgXHJcblx0ICAgIGNvbnN0IE51bUhpdHMgPSBIaXRzLmxlbmd0aDtcclxuXHQgICAgaWYgKCFOdW1IaXRzKSB7XHJcblx0XHRyZXR1cm47XHJcblx0ICAgIH1cclxuXHQgICAgXHJcbiAgICAgICAgICAgIC8vIERlbWFya3VwIHRoZSB0ZXh0XHJcbiAgICAgICAgICAgIGNvbnN0IE5ld1N0cmluZyA9IChDdXJTZWxlY3Rpb24ucmVwbGFjZUFsbChQcmVmaXhSZWdleCwgXCJcIikpLnJlcGxhY2VBbGwoUG9zdGZpeFJlZ2V4LCBcIlwiKTtcclxuICAgICAgICAgICAgRWRpdG9yVi5yZXBsYWNlUmFuZ2UoTmV3U3RyaW5nLCBGcm9tLCBUbyk7XHJcblx0fVxyXG4gICAgfVxyXG5cclxuICAgIE1hcmt1cFNlbGVjdGVkVGV4dChDb2xvclN0cjogc3RyaW5nLCBIaWdobGlnaHRTdHI6IHN0cmluZylcclxuICAgIHtcclxuXHQvLyBWZXJpZnkgd2UgaGF2ZSBhIHNlbGVjdGlvblxyXG4gICAgICAgIGNvbnN0IEVkaXRvclYgPSB0aGlzLkdldEVkaXRvcigpO1xyXG4gICAgICAgIGlmICghRWRpdG9yVikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghRWRpdG9yVi5zb21ldGhpbmdTZWxlY3RlZCgpKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyB0ZXh0IHNlbGVjdGVkIVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2xlYXIgZXhpc3RpbmcgbWFya3VwXHJcbiAgICAgICAgdGhpcy5SZW1vdmVTZWxlY3RlZFRleHRNYXJrdXAoKTtcclxuXHJcbiAgICAgICAgLy8gQnVpbGQgb3VyIHN0eWxlIHN0cmluZ1xyXG4gICAgICAgIGNvbnN0IEJvbGQgPSB0aGlzLkJvbGRTZWxlY3RlZDtcclxuICAgICAgICBjb25zdCBJdGFsaWMgPSB0aGlzLkl0YWxpY1NlbGVjdGVkO1xyXG4gICAgICAgIGNvbnN0IEJvbGRTdHIgPSBCb2xkPyBcImZvbnQtd2VpZ2h0OmJvbGQ7XCIgOiBcIlwiO1xyXG4gICAgICAgIGNvbnN0IEl0YWxpY1N0ciA9IEl0YWxpYz8gXCJmb250LXN0eWxlOml0YWxpYztcIiA6IFwiXCI7XHJcbiAgICAgICAgY29uc3QgU3R5bGVTdHIgPSBDb2xvclN0ciArIEhpZ2hsaWdodFN0ciArIEJvbGRTdHIgKyBJdGFsaWNTdHI7XHJcblxyXG5cdC8vIExvb3AgdGhyb3VnaCBvdXIgc2VsZWN0aW9uc1xyXG5cdGZvciAobGV0IFNlbGVjdGlvbklEID0gMDtcclxuXHQgICAgIFNlbGVjdGlvbklEIDwgRWRpdG9yVi5saXN0U2VsZWN0aW9ucygpLmxlbmd0aDtcclxuXHQgICAgICsrU2VsZWN0aW9uSUQpIHtcclxuXHQgICAgLy8gUmUtZ3JhYiB0aGUgY3VycmVudCBzZWxlY3Rpb25zIGV2ZXJ5IGxvb3AsIHNpbmNlIHJlcGxhY2VSYW5nZSB3aWxsIG1vdmUgdGhlIHRleHQgYXJvdW5kXHJcblx0ICAgIGNvbnN0IFNlbGVjdGlvbnMgPSBFZGl0b3JWLmxpc3RTZWxlY3Rpb25zKCk7XHJcblx0ICAgIGNvbnN0IFRoaXNTZWxlY3Rpb24gPSBTZWxlY3Rpb25zW1NlbGVjdGlvbklEXTtcclxuXHQgICAgY29uc3QgQW5jaG9yID0gVGhpc1NlbGVjdGlvbi5hbmNob3I7XHJcblx0ICAgIGNvbnN0IEhlYWQgPSBUaGlzU2VsZWN0aW9uLmhlYWQ7XHJcblx0ICAgIGNvbnN0IEZyb20gPSAoQW5jaG9yLmxpbmUgPiBIZWFkLmxpbmUgfHwgQW5jaG9yLmNoID4gSGVhZC5jaCk/IEhlYWQgOiBBbmNob3I7XHJcblx0ICAgIGNvbnN0IFRvID0gKEFuY2hvci5saW5lID4gSGVhZC5saW5lIHx8IEFuY2hvci5jaCA+IEhlYWQuY2gpPyBBbmNob3IgOiBIZWFkO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGlzIHNlbGVjdGlvblxyXG4gICAgICAgICAgICBjb25zdCBQcmVmaXggPSBcIjxzcGFuIHN0eWxlPVxcXCJcIiArIFN0eWxlU3RyICsgXCJcXFwiPlwiO1xyXG4gICAgICAgICAgICBjb25zdCBDdXJTZWxlY3Rpb24gPSBFZGl0b3JWLmdldFJhbmdlKEZyb20sIFRvKTtcclxuICAgICAgICAgICAgY29uc3QgUG9zdGZpeCA9IFwiPC9zcGFuPlwiO1xyXG5cdCAgICBFZGl0b3JWLnJlcGxhY2VSYW5nZShQcmVmaXggKyBDdXJTZWxlY3Rpb24gKyBQb3N0Zml4LCBGcm9tLCBUbyk7XHJcblx0fVxyXG5cclxuICAgICAgICAvLyBCdW1wIHRoZSBjdXJzb3IgZm9yd2FyZCBvbmUgaWYgdGhlcmUgaXMgcm9vbVxyXG5cdC8vIFRoaXMgbWFrZXMgaXQgc28gd2UgZG9uJ3QgaGF2ZSB0byBzZWUgdGhlIG1hcmt1cCBhZnRlciBpdCBpcyBhcHBsaWVkXHJcblx0bGV0IE5ld1NlbGVjdGlvbnMgPSBbXTtcclxuXHRjb25zdCBTZWxlY3Rpb25zID0gRWRpdG9yVi5saXN0U2VsZWN0aW9ucygpO1xyXG5cdGZvciAobGV0IFNlbGVjdGlvbklEID0gMDtcclxuXHQgICAgIFNlbGVjdGlvbklEIDwgU2VsZWN0aW9ucy5sZW5ndGg7XHJcblx0ICAgICArK1NlbGVjdGlvbklEKSB7XHJcblx0ICAgIGNvbnN0IFRoaXNTZWxlY3Rpb24gPSBTZWxlY3Rpb25zW1NlbGVjdGlvbklEXTtcclxuICAgICAgICAgICAgY29uc3QgSGVhZCA9IFRoaXNTZWxlY3Rpb24uaGVhZDtcclxuXHQgICAgY29uc3QgQ3VyUCA9IEhlYWQuY2g7XHJcblx0ICAgIGxldCBMaW5lID0gSGVhZC5saW5lO1xyXG4gICAgICAgICAgICBsZXQgTmV3UCA9IChDdXJQID49IEVkaXRvclYuZ2V0TGluZShMaW5lKS5sZW5ndGgpPyBDdXJQIDogQ3VyUCArIDE7XHJcbiAgICAgICAgICAgIGlmIChOZXdQID09IEN1clAgJiYgTGluZSAhPSBFZGl0b3JWLmxhc3RMaW5lKCkpIHsgLy8gV2UgYXJlIGF0IHRoZSBlbmQgb2YgdGhlIGxpbmUsIGJ1dCB0aGVyZSdzIG9uZSBiZWxvdyB1c1xyXG5cdFx0TmV3UCA9IDA7XHJcblx0XHQrK0xpbmU7XHJcbiAgICAgICAgICAgIH1cclxuXHQgICAgXHJcblx0ICAgIGNvbnN0IE5ld0hlYWQgPSB7Y2g6IE5ld1AsIGxpbmU6IExpbmV9O1xyXG5cdCAgICBOZXdTZWxlY3Rpb25zLnB1c2goe2FuY2hvcjogTmV3SGVhZCwgaGVhZDogTmV3SGVhZH0pO1xyXG5cdH1cclxuXHJcblx0RWRpdG9yVi5zZXRTZWxlY3Rpb25zKE5ld1NlbGVjdGlvbnMsIDApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBDb2xvclNlbGVjdGVkVGV4dChDb2xvcjogc3RyaW5nW10pXHJcbiAgICB7XHJcblx0Y29uc3QgQ29sb3JTdHIgPSBcImNvbG9yOlwiICsgQ29sb3JbMV0gKyBcIjtcIjtcclxuXHR0aGlzLk1hcmt1cFNlbGVjdGVkVGV4dChDb2xvclN0ciwgXCJcIik7XHJcbiAgICB9XHJcblxyXG4gICAgSGlnaGxpZ2h0U2VsZWN0ZWRUZXh0KENvbG9yczogc3RyaW5nW10pXHJcbiAgICB7XHJcblx0Y29uc3QgQ29sb3JTdHIgPSBcImNvbG9yOlwiICsgQ29sb3JzWzFdICsgXCI7XCI7XHJcbiAgICAgICAgY29uc3QgSGlnaGxpZ2h0U3RyID0gXCJiYWNrZ3JvdW5kOlwiICsgQ29sb3JzWzJdICsgXCJCQjtcIjtcclxuXHR0aGlzLk1hcmt1cFNlbGVjdGVkVGV4dChDb2xvclN0ciwgSGlnaGxpZ2h0U3RyKTtcclxuICAgIH1cclxuXHJcbiAgICBEb0NoZWNrYm94SXRlbShFdmVudCwgTWVudSwgU2V0dGluZywgVGl0bGUsIEljb24pXHJcbiAgICB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIE9wZW5Db2xvck1lbnUoRXZlbnQpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgRWRpdG9yViA9IHRoaXMuUGx1Z2luLkdldEVkaXRvcigpO1xyXG4gICAgICAgIGlmICghRWRpdG9yVikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IENvbG9yTWVudSA9IG5ldyBNZW51KCk7XHJcbiAgICAgICAgdmFyIEl0ZW1JRCA9IDA7XHJcblxyXG4gICAgICAgIENvbG9yTWVudS5hZGRJdGVtKChCb2xkRWxlbWVudCkgPT5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgQm9sZEVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcImJvbGRcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJCb2xkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldENoZWNrZWQodGhpcy5QbHVnaW4uQm9sZFNlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5QbHVnaW4uQm9sZFNlbGVjdGVkID0gIXRoaXMuUGx1Z2luLkJvbGRTZWxlY3RlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQm9sZEVsZW1lbnQuc2V0Q2hlY2tlZCh0aGlzLlBsdWdpbi5Cb2xkU2VsZWN0ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuUGx1Z2luLkJvbGRTZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgYSBidWcgd2l0aCBjaGVja21hcmsgdG9nZ2xpbmcuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSB1bmNoZWNrLCBkaXNvd24gdGhlIGljb24gZWxlbWVudC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJvbGRFbGVtZW50LmNoZWNrSWNvbkVsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDb2xvck1lbnUuc2hvd0F0TW91c2VFdmVudChFdmVudCk7ICAvLyBLZWVwIHRoZSBtZW51IG9wZW5cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICArK0l0ZW1JRDtcclxuXHJcbiAgICAgICAgQ29sb3JNZW51LmFkZEl0ZW0oKEl0YWxpY0VsZW1lbnQpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEl0YWxpY0VsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcIml0YWxpY1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIkl0YWxpY1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDaGVja2VkKHRoaXMuUGx1Z2luLkl0YWxpY1NlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5QbHVnaW4uSXRhbGljU2VsZWN0ZWQgPSAhdGhpcy5QbHVnaW4uSXRhbGljU2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEl0YWxpY0VsZW1lbnQuc2V0Q2hlY2tlZCh0aGlzLlBsdWdpbi5JdGFsaWNTZWxlY3RlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5QbHVnaW4uSXRhbGljU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGEgYnVnIHdpdGggY2hlY2ttYXJrIHRvZ2dsaW5nLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgdW5jaGVjaywgZGlzb3duIHRoZSBpY29uIGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJdGFsaWNFbGVtZW50LmNoZWNrSWNvbkVsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDb2xvck1lbnUuc2hvd0F0TW91c2VFdmVudChFdmVudCk7ICAvLyBLZWVwIHRoZSBtZW51IG9wZW5cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICArK0l0ZW1JRDtcclxuXHJcbiAgICAgICAgQ29sb3JNZW51LmFkZFNlcGFyYXRvcigpO1xyXG4gICAgICAgICsrSXRlbUlEO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBDb2xvckluZGV4ID0gMDtcclxuICAgICAgICAgICAgIENvbG9ySW5kZXggPCBOVU1fQ09MT1JTO1xyXG4gICAgICAgICAgICAgKytDb2xvckluZGV4KSB7XHJcbiAgICAgICAgICAgIENvbG9yTWVudS5hZGRJdGVtKChDb2xvckl0ZW0pID0+XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ29sb3JJdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiY2FzZS1zZW5zaXRpdmVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKHRoaXMuUGx1Z2luLlNldHRpbmdzLkNvbG9yc1tDb2xvckluZGV4XVswXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldENoZWNrZWQoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuUGx1Z2luLkNvbG9yU2VsZWN0ZWRUZXh0KHRoaXMuUGx1Z2luLlNldHRpbmdzLkNvbG9yc1tDb2xvckluZGV4XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFZGl0b3JWLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnN0IEl0ZW1FbCA9IENvbG9yTWVudS5pdGVtc1tJdGVtSURdO1xyXG4gICAgICAgICAgICBJdGVtRWwuaWNvbkVsLnN0eWxlLmNvbG9yID0gdGhpcy5QbHVnaW4uU2V0dGluZ3MuQ29sb3JzW0NvbG9ySW5kZXhdWzFdO1xyXG4gICAgICAgICAgICArK0l0ZW1JRDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENvbG9yTWVudS5zaG93QXRNb3VzZUV2ZW50KEV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBPcGVuSGlnaGxpZ2h0TWVudShFdmVudClcclxuICAgIHtcclxuICAgICAgICBjb25zdCBFZGl0b3JWID0gdGhpcy5QbHVnaW4uR2V0RWRpdG9yKCk7XHJcbiAgICAgICAgaWYgKCFFZGl0b3JWKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgSGlnaGxpZ2h0TWVudSA9IG5ldyBNZW51KCk7XHJcbiAgICAgICAgdmFyIEl0ZW1JRCA9IDA7XHJcblxyXG4gICAgICAgIEhpZ2hsaWdodE1lbnUuYWRkSXRlbSgoQm9sZEVsZW1lbnQpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEJvbGRFbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJib2xkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiQm9sZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDaGVja2VkKHRoaXMuUGx1Z2luLkJvbGRTZWxlY3RlZClcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuUGx1Z2luLkJvbGRTZWxlY3RlZCA9ICF0aGlzLlBsdWdpbi5Cb2xkU2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJvbGRFbGVtZW50LnNldENoZWNrZWQodGhpcy5QbHVnaW4uQm9sZFNlbGVjdGVkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLlBsdWdpbi5Cb2xkU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGEgYnVnIHdpdGggY2hlY2ttYXJrIHRvZ2dsaW5nLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgdW5jaGVjaywgZGlzb3duIHRoZSBpY29uIGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCb2xkRWxlbWVudC5jaGVja0ljb25FbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgSGlnaGxpZ2h0TWVudS5zaG93QXRNb3VzZUV2ZW50KEV2ZW50KTsgIC8vIEtlZXAgdGhlIG1lbnUgb3BlblxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgICsrSXRlbUlEO1xyXG5cclxuICAgICAgICBIaWdobGlnaHRNZW51LmFkZEl0ZW0oKEl0YWxpY0VsZW1lbnQpID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIEl0YWxpY0VsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcIml0YWxpY1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIkl0YWxpY1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDaGVja2VkKHRoaXMuUGx1Z2luLkl0YWxpY1NlbGVjdGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5QbHVnaW4uSXRhbGljU2VsZWN0ZWQgPSAhdGhpcy5QbHVnaW4uSXRhbGljU2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEl0YWxpY0VsZW1lbnQuc2V0Q2hlY2tlZCh0aGlzLlBsdWdpbi5JdGFsaWNTZWxlY3RlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5QbHVnaW4uSXRhbGljU2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGEgYnVnIHdpdGggY2hlY2ttYXJrIHRvZ2dsaW5nLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgdW5jaGVjaywgZGlzb3duIHRoZSBpY29uIGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJdGFsaWNFbGVtZW50LmNoZWNrSWNvbkVsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBIaWdobGlnaHRNZW51LnNob3dBdE1vdXNlRXZlbnQoRXZlbnQpOyAgLy8gS2VlcCB0aGUgbWVudSBvcGVuXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgKytJdGVtSUQ7XHJcblxyXG4gICAgICAgIEhpZ2hsaWdodE1lbnUuYWRkU2VwYXJhdG9yKCk7XHJcbiAgICAgICAgKytJdGVtSUQ7XHJcblxyXG4gICAgICAgIGZvciAobGV0IEhpZ2hsaWdodEluZGV4ID0gMDtcclxuICAgICAgICAgICAgIEhpZ2hsaWdodEluZGV4IDwgTlVNX0NPTE9SUztcclxuICAgICAgICAgICAgICsrSGlnaGxpZ2h0SW5kZXgpIHtcclxuICAgICAgICAgICAgSGlnaGxpZ2h0TWVudS5hZGRJdGVtKChIaWdobGlnaHRJdGVtKSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEhpZ2hsaWdodEl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJjYXNlLXNlbnNpdGl2ZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUodGhpcy5QbHVnaW4uU2V0dGluZ3MuSGlnaGxpZ2h0Q29sb3JzW0hpZ2hsaWdodEluZGV4XVswXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldENoZWNrZWQoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuUGx1Z2luLkhpZ2hsaWdodFNlbGVjdGVkVGV4dCh0aGlzLlBsdWdpbi5TZXR0aW5ncy5IaWdobGlnaHRDb2xvcnNbSGlnaGxpZ2h0SW5kZXhdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVkaXRvclYuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY29uc3QgSXRlbUVsID0gSGlnaGxpZ2h0TWVudS5pdGVtc1tJdGVtSURdO1xyXG4gICAgICAgICAgICBJdGVtRWwuaWNvbkVsLnN0eWxlLmNvbG9yID0gdGhpcy5QbHVnaW4uU2V0dGluZ3MuSGlnaGxpZ2h0Q29sb3JzW0hpZ2hsaWdodEluZGV4XVsxXTtcclxuICAgICAgICAgICAgSXRlbUVsLmljb25FbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLlBsdWdpbi5TZXR0aW5ncy5IaWdobGlnaHRDb2xvcnNbSGlnaGxpZ2h0SW5kZXhdWzJdO1xyXG4gICAgICAgICAgICArK0l0ZW1JRDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEhpZ2hsaWdodE1lbnUuc2hvd0F0TW91c2VFdmVudChFdmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgT3BlblJlbW92ZU1hcmt1cE1lbnUoRXZlbnQpXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgRWRpdG9yViA9IHRoaXMuUGx1Z2luLkdldEVkaXRvcigpO1xyXG4gICAgICAgIGlmICghRWRpdG9yVikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIUVkaXRvclYuc29tZXRoaW5nU2VsZWN0ZWQoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBFZGl0b3JWLmZvY3VzKCk7XHJcbiAgICAgICAgdGhpcy5QbHVnaW4uUmVtb3ZlU2VsZWN0ZWRUZXh0TWFya3VwKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIE1hcmt1cFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICAgIFBsdWdpbk9iajogTWFya3VwUGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKEFwcE9iajogQXBwLCBQbHVnaW5PYmo6IE1hcmt1cFBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKEFwcE9iaiwgUGx1Z2luT2JqKTtcclxuICAgICAgICB0aGlzLlBsdWdpbk9iaiA9IFBsdWdpbk9iajtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xyXG5cclxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICAvLyBDb2xvciBwYWxldHRlIHNldHRpbmdzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiQ29sb3IgUGFsZXR0ZVwiKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJTZXQgdGhlIGF2YWlsYWJsZSBjb2xvcmVkIHRleHQgbWVudSBvcHRpb25zLlwiKVxyXG4gICAgICAgICAgICAgICAgLnNldEhlYWRpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IENvbG9ySW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgIENvbG9ySW5kZXggPCBOVU1fQ09MT1JTO1xyXG4gICAgICAgICAgICAgICAgICsrQ29sb3JJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoXCJDb2xvciBcIiArIChDb2xvckluZGV4ICsgMSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChFeHRyYUJ1dHRvbikgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgRXh0cmFCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwicm90YXRlLWNjd1wiKVxyXG5cdFx0XHQgICAgLnNldFRvb2x0aXAoXCJSZXN0b3JlIGRlZmF1bHRcIiwgeyBwbGFjZW1lbnQ6IFwidG9wXCIgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlBsdWdpbk9iai5TZXR0aW5ncy5Db2xvcnNbQ29sb3JJbmRleF0gPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX1NFVFRJTkdTLkNvbG9yc1tDb2xvckluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLlBsdWdpbk9iai5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTsgLy8gUmVmcmVzaCB0aGUgcGFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHRBcmVhKChDb2xvclBpY2tlcikgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgQ29sb3JQaWNrZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLlBsdWdpbk9iai5TZXR0aW5ncy5Db2xvcnNbQ29sb3JJbmRleF1bMF0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKFZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5QbHVnaW5PYmouU2V0dGluZ3MuQ29sb3JzW0NvbG9ySW5kZXhdWzBdID0gVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5QbHVnaW5PYmouc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0dGhpcy5QbHVnaW5PYmouUmVnaXN0ZXJDb21tYW5kcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICApXHJcblx0XHQgICAgLmFkZENvbG9yUGlja2VyKChDb2xvclBpY2tlcikgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgQ29sb3JQaWNrZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLlBsdWdpbk9iai5TZXR0aW5ncy5Db2xvcnNbQ29sb3JJbmRleF1bMV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKFZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5QbHVnaW5PYmouU2V0dGluZ3MuQ29sb3JzW0NvbG9ySW5kZXhdWzFdID0gVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5QbHVnaW5PYmouc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEhpZ2hsaWdodCBwYWxldHRlIHNldHRpbmdzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiSGlnaGxpZ2h0IFBhbGV0dGVcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiU2V0IHRoZSBhdmFpbGFibGUgaGlnaGxpZ2h0ZXIgbWVudSBvcHRpb25zLiBMZWZ0IHZhbHVlIGlzIHRoZSB0ZXh0IGNvbG9yLCByaWdodCBpcyB0aGUgYmFja2dyb3VuZC5cIilcclxuICAgICAgICAgICAgICAgIC5zZXRIZWFkaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBIaWdobGlnaHRJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgSGlnaGxpZ2h0SW5kZXggPCBOVU1fQ09MT1JTO1xyXG4gICAgICAgICAgICAgICAgICsrSGlnaGxpZ2h0SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiSGlnaGxpZ2h0IFwiICsgKEhpZ2hsaWdodEluZGV4ICsgMSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKChFeHRyYUJ1dHRvbikgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgRXh0cmFCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwicm90YXRlLWNjd1wiKVxyXG5cdFx0XHQgICAgLnNldFRvb2x0aXAoXCJSZXN0b3JlIGRlZmF1bHRcIiwgeyBwbGFjZW1lbnQ6IFwidG9wXCIgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlBsdWdpbk9iai5TZXR0aW5ncy5IaWdobGlnaHRDb2xvcnNbSGlnaGxpZ2h0SW5kZXhdID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgREVGQVVMVF9TRVRUSU5HUy5IaWdobGlnaHRDb2xvcnNbSGlnaGxpZ2h0SW5kZXhdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5QbHVnaW5PYmouc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7IC8vIFJlZnJlc2ggdGhlIHBhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0QXJlYSgoSGlnaGxpZ2h0UGlja2VyKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBIaWdobGlnaHRQaWNrZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLlBsdWdpbk9iai5TZXR0aW5ncy5IaWdobGlnaHRDb2xvcnNbSGlnaGxpZ2h0SW5kZXhdWzBdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jIChWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuUGx1Z2luT2JqLlNldHRpbmdzLkhpZ2hsaWdodENvbG9yc1tIaWdobGlnaHRJbmRleF1bMF0gPSBWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLlBsdWdpbk9iai5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR0aGlzLlBsdWdpbk9iai5SZWdpc3RlckNvbW1hbmRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29sb3JQaWNrZXIoKEhpZ2hsaWdodFBpY2tlcikgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgSGlnaGxpZ2h0UGlja2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5QbHVnaW5PYmouU2V0dGluZ3MuSGlnaGxpZ2h0Q29sb3JzW0hpZ2hsaWdodEluZGV4XVsxXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAoVmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlBsdWdpbk9iai5TZXR0aW5ncy5IaWdobGlnaHRDb2xvcnNbSGlnaGxpZ2h0SW5kZXhdWzFdID0gVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5QbHVnaW5PYmouc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAuYWRkQ29sb3JQaWNrZXIoKEhpZ2hsaWdodFBpY2tlcikgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgSGlnaGxpZ2h0UGlja2VyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5QbHVnaW5PYmouU2V0dGluZ3MuSGlnaGxpZ2h0Q29sb3JzW0hpZ2hsaWdodEluZGV4XVsyXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAoVmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlBsdWdpbk9iai5TZXR0aW5ncy5IaWdobGlnaHRDb2xvcnNbSGlnaGxpZ2h0SW5kZXhdWzJdID0gVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5QbHVnaW5PYmouc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcbiJdLAog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M0IsUUFBUSxvR0FBb0csRUFDNUcsV0FBVztBQUVoQixlQUFTLGlCQUFpQixHQUNyQixpQkFBaUIsWUFDakIsRUFBRSxnQkFBZ0I7QUFDbkIsWUFBSSx3QkFBUSxXQUFXLEVBQ2xCLFFBQVEsZ0JBQWdCLGlCQUFpQixFQUFFLEVBQzNDO0FBQUEsVUFBZSxDQUFDLGdCQUNiLFlBQ0ssUUFBUSxZQUFZLEVBQ3pDLFdBQVcsbUJBQW1CLEVBQUUsV0FBVyxNQUFNLENBQUMsRUFDN0IsUUFBUSxZQUFZO0FBQ2pCLGlCQUFLLFVBQVUsU0FBUyxnQkFBZ0IsY0FBYyxJQUNsRCxpQkFBaUIsZ0JBQWdCLGNBQWM7QUFDbkQsa0JBQU0sS0FBSyxVQUFVLGFBQWE7QUFDbEMsaUJBQUssUUFBUTtBQUFBLFVBQ2pCLENBQUM7QUFBQSxRQUNULEVBQ0M7QUFBQSxVQUFZLENBQUMsb0JBQ1YsZ0JBQ0ssU0FBUyxLQUFLLFVBQVUsU0FBUyxnQkFBZ0IsY0FBYyxFQUFFLENBQUMsQ0FBQyxFQUNuRSxTQUFTLE9BQU8sVUFBVTtBQUN2QixpQkFBSyxVQUFVLFNBQVMsZ0JBQWdCLGNBQWMsRUFBRSxDQUFDLElBQUk7QUFDN0Qsa0JBQU0sS0FBSyxVQUFVLGFBQWE7QUFDOUQsaUJBQUssVUFBVSxpQkFBaUI7QUFBQSxVQUNSLENBQUM7QUFBQSxRQUNULEVBQ0M7QUFBQSxVQUFlLENBQUMsb0JBQ2IsZ0JBQ0ssU0FBUyxLQUFLLFVBQVUsU0FBUyxnQkFBZ0IsY0FBYyxFQUFFLENBQUMsQ0FBQyxFQUNuRSxTQUFTLE9BQU8sVUFBVTtBQUN2QixpQkFBSyxVQUFVLFNBQVMsZ0JBQWdCLGNBQWMsRUFBRSxDQUFDLElBQUk7QUFDN0Qsa0JBQU0sS0FBSyxVQUFVLGFBQWE7QUFBQSxVQUN0QyxDQUFDO0FBQUEsUUFDVCxFQUNDO0FBQUEsVUFBZSxDQUFDLG9CQUNiLGdCQUNLLFNBQVMsS0FBSyxVQUFVLFNBQVMsZ0JBQWdCLGNBQWMsRUFBRSxDQUFDLENBQUMsRUFDbkUsU0FBUyxPQUFPLFVBQVU7QUFDdkIsaUJBQUssVUFBVSxTQUFTLGdCQUFnQixjQUFjLEVBQUUsQ0FBQyxJQUFJO0FBQzdELGtCQUFNLEtBQUssVUFBVSxhQUFhO0FBQUEsVUFDdEMsQ0FBQztBQUFBLFFBQ1Q7QUFBQSxNQUNSO0FBQUEsSUFDSjtBQUFBLEVBRUo7QUFDSjsiLAogICJuYW1lcyI6IFsiU2VsZWN0aW9ucyIsICJNZW51IiwgIlNldHRpbmciXQp9Cg==
